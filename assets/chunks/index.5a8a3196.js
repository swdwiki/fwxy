import{_ as J,g as V,i as Q,c as Y,s as Z,a as ee}from"./index.8a7f7853.js";import{u as ae}from"./use-index.0b51a5ca.js";import{R as re}from"./index.6ced3d4b.js";import{I as oe}from"./index.92521e15.js";import{I as te}from"./index.ec731783.js";import{d as W,a5 as K,V as ne,h as i,g as p,j as se,x as le,K as w,o as z,c as $,O as m,w as ie,k as F,n as y,L as ue,r as S,e as b,W as L,E as de,a0 as ce,a6 as me,a as ve}from"./framework.683b9a23.js";import{P as ge}from"./index.9c7b8b8b.js";const M=Symbol("ArcoAvatarGroup");var pe=Object.defineProperty,B=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,G=(e,a,r)=>a in e?pe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,U=(e,a)=>{for(var r in a||(a={}))fe.call(a,r)&&G(e,r,a[r]);if(B)for(var r of B(a))he.call(a,r)&&G(e,r,a[r]);return e};const ye=W({name:"Avatar",components:{ResizeObserver:re,IconImageClose:oe,IconLoading:te},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:a,emit:r,attrs:u}){const{shape:C,size:f,autoFixFontSize:v,triggerType:d,triggerIconStyle:c}=K(e),t=V("avatar"),n=ne(M,void 0),l=i(),s=i(),_=p(()=>{var o;return(o=n==null?void 0:n.shape)!=null?o:C.value}),g=p(()=>{var o;return(o=n==null?void 0:n.size)!=null?o:f.value}),P=p(()=>{var o;return(o=n==null?void 0:n.autoFixFontSize)!=null?o:v.value}),I=i(!1),R=i(!1),A=i(!0),T=i(!1),k=n?ae({itemRef:l,selector:`.${t}`}).computedIndex:i(-1),H=p(()=>{var o;const h=Q(g.value)?{width:`${g.value}px`,height:`${g.value}px`,fontSize:`${g.value/2}px`}:{};return n&&(h.zIndex=n.zIndexAscend?k.value+1:n.total-k.value,h.marginLeft=k.value!==0?`-${((o=g.value)!=null?o:40)/4}px`:"0"),h}),X=Ce({triggerIconStyle:c==null?void 0:c.value,inlineStyle:u.style,triggerType:d.value}),E=()=>{!I.value&&!e.imageUrl&&de(()=>{var o;if(!s.value||!l.value)return;const h=s.value.clientWidth,N=(o=g.value)!=null?o:l.value.offsetWidth,j=N/(h+8);N&&j<1&&(s.value.style.transform=`scale(${j}) translateX(-50%)`),A.value=!0})};se(()=>{var o;(o=s.value)!=null&&o.firstElementChild&&["IMG","PICTURE"].includes(s.value.firstElementChild.tagName)&&(I.value=!0),P.value&&E()}),le(f,()=>{P.value&&E()});const q=p(()=>[t,`${t}-${_.value}`]),D=p(()=>I.value||e.imageUrl?`${t}-image`:`${t}-text`);return{prefixCls:t,itemRef:l,cls:q,outerStyle:H,wrapperRef:s,wrapperCls:D,computedTriggerIconStyle:X,isImage:I,shouldLoad:A,isLoaded:T,hasError:R,onClick:o=>{r("click",o)},handleResize:()=>{P.value&&E()},handleImgLoad:()=>{T.value=!0,r("load")},handleImgError:()=>{R.value=!0,r("error")}}}}),Ce=({triggerType:e,inlineStyle:a={},triggerIconStyle:r={}})=>{let u={};return e==="button"&&(!r||r&&!r.color)&&a&&a.backgroundColor&&(u={color:a.backgroundColor}),U(U({},r),u)},Ie=["src"];function ze(e,a,r,u,C,f){const v=w("IconImageClose"),d=w("IconLoading"),c=w("resize-observer");return z(),$("div",{ref:"itemRef",style:L(e.outerStyle),class:y([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:a[2]||(a[2]=(...t)=>e.onClick&&e.onClick(...t))},[m(c,{onResize:e.handleResize},{default:ie(()=>[F("span",{ref:"wrapperRef",class:y(e.wrapperCls)},[e.imageUrl?(z(),$(ue,{key:0},[e.hasError?S(e.$slots,"error",{key:0},()=>[F("div",{class:y(`${e.prefixCls}-image-icon`)},[m(v)],2)]):b("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?S(e.$slots,"default",{key:1},()=>[F("div",{class:y(`${e.prefixCls}-image-icon`)},[m(d)],2)]):b("v-if",!0),e.hasError||!e.shouldLoad?b("v-if",!0):(z(),$("img",{key:2,src:e.imageUrl,style:L({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:a[0]||(a[0]=(...t)=>e.handleImgLoad&&e.handleImgLoad(...t)),onError:a[1]||(a[1]=(...t)=>e.handleImgError&&e.handleImgError(...t))},null,44,Ie))],64)):S(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(z(),$("div",{key:0,class:y(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:L(e.computedTriggerIconStyle)},[S(e.$slots,"trigger-icon")],6)):b("v-if",!0)],6)}var x=J(ye,[["render",ze]]);const O=W({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:a}){const{shape:r,size:u,autoFixFontSize:C,zIndexAscend:f}=K(e),v=V("avatar-group"),d=i(0);return ce(M,me({shape:r,size:u,autoFixFontSize:C,zIndexAscend:f,total:d})),()=>{var c,t;const n=Y((t=(c=a.default)==null?void 0:c.call(a))!=null?t:[]),l=e.maxCount>0?n.slice(0,e.maxCount):n,s=e.maxCount>0?n.slice(e.maxCount):[];return d.value!==l.length&&(d.value=l.length),m("div",{class:v},[l,s.length>0&&m(ge,e.maxPopoverTriggerProps,{default:()=>[m(x,{class:`${v}-max-count-avatar`,style:e.maxStyle},{default:()=>[ve("+"),s.length]})],content:()=>m("div",null,[s])})])}}}),Re=Object.assign(x,{Group:O,install:(e,a)=>{Z(e,a);const r=ee(a);e.component(r+x.name,x),e.component(r+O.name,O)}});export{Re as A};
