import{_ as N,g as M,i as Y,k as _e,h as X,l as Ge,j as He,s as Ye,a as Xe}from"./index.8a7f7853.js";import{I as Ke}from"./index.92521e15.js";import{I as We}from"./index.ec731783.js";import{d as S,o as p,c as y,n as d,t as ne,e as $,r as F,K as z,k as b,O,U as re,a9 as Je,a5 as J,g as l,L as Ze,M as Qe,b as x,w as K,h as W,A as se,x as Ce,E as xe,W as Z,a6 as q,ab as Q,ac as et,ad as tt,T as ze,ae as ot,af as nt,V as rt,ag as De,a0 as it}from"./framework.683b9a23.js";import{T as Oe,u as ae}from"./index.452e785d.js";import{I as st,a as at}from"./index.560a6753.js";import{o as de,a as ve,q as lt,u as ut,b as ct,i as dt}from"./index.6ced3d4b.js";import{I as vt}from"./index.2a01ce05.js";import{u as Re}from"./index.dc70425f.js";var pt=S({name:"RenderFunction",props:{renderFunc:{type:Function,required:!0}},render(){return this.renderFunc(this.$attrs)}});const ft=S({name:"ImageFooter",props:{title:{type:String},description:{type:String}},setup(){return{prefixCls:M("image-footer")}}}),mt=["title"],gt=["title"];function yt(e,t,o,r,i,a){return p(),y("div",{class:d(e.prefixCls)},[e.title||e.description?(p(),y("div",{key:0,class:d(`${e.prefixCls}-caption`)},[e.title?(p(),y("div",{key:0,class:d(`${e.prefixCls}-caption-title`),title:e.title},ne(e.title),11,mt)):$("v-if",!0),e.description?(p(),y("div",{key:1,class:d(`${e.prefixCls}-caption-description`),title:e.description},ne(e.description),11,gt)):$("v-if",!0)],2)):$("v-if",!0),e.$slots.extra?(p(),y("div",{key:1,class:d(`${e.prefixCls}-extra`)},[F(e.$slots,"extra")],2)):$("v-if",!0)],2)}var kt=N(ft,[["render",yt]]);const $t=S({name:"ImagePreviewArrow",components:{IconLeft:st,IconRight:at},props:{onPrev:{type:Function},onNext:{type:Function}},setup(){return{prefixCls:M("image-preview-arrow")}}});function wt(e,t,o,r,i,a){const n=z("icon-left"),f=z("icon-right");return p(),y("div",{class:d(e.prefixCls)},[b("div",{class:d([`${e.prefixCls}-left`,{[`${e.prefixCls}-disabled`]:!e.onPrev}]),onClick:t[0]||(t[0]=s=>{s.preventDefault(),e.onPrev&&e.onPrev()})},[O(n)],2),b("div",{class:d([`${e.prefixCls}-right`,{[`${e.prefixCls}-disabled`]:!e.onNext}]),onClick:t[1]||(t[1]=s=>{s.preventDefault(),e.onNext&&e.onNext()})},[O(f)],2)],2)}var ht=N($t,[["render",wt]]);function bt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Je(e)}var be=S({name:"ImagePreviewAction",components:{Tooltip:Oe},inheritAttrs:!1,props:{name:{type:String},disabled:{type:Boolean}},setup(e,{slots:t,attrs:o}){const r=M("image-preview-toolbar-action");return()=>{var i;const{name:a,disabled:n}=e,f=(i=t.default)==null?void 0:i.call(t);if(!f||!f.length)return null;const s=O("div",re({class:[`${r}`,{[`${r}-disabled`]:n}],onMousedown:m=>{m.preventDefault()}},o),[O("span",{class:`${r}-content`},[f])]);return a?O(Oe,{class:`${r}-tooltip`,content:a},bt(s)?s:{default:()=>[s]}):s}}}),Ct=S({name:"ImagePreviewToolbar",components:{RenderFunction:pt,PreviewAction:be},props:{actions:{type:Array,default:()=>[]},actionsLayout:{type:Array,default:()=>[]}},setup(e){const{actions:t,actionsLayout:o}=J(e),r=M("image-preview-toolbar"),i=l(()=>{const a=new Set(o.value),n=s=>a.has(s.key);return t.value.filter(n).sort((s,m)=>{const u=o.value.indexOf(s.key),k=o.value.indexOf(m.key);return u>k?1:-1})});return{prefixCls:r,resultActions:i}}});function It(e,t,o,r,i,a){const n=z("RenderFunction"),f=z("PreviewAction");return p(),y("div",{class:d(e.prefixCls)},[(p(!0),y(Ze,null,Qe(e.resultActions,s=>(p(),x(f,{key:s.key,name:s.name,disabled:s.disabled,onClick:s.onClick},{default:K(()=>[O(n,{"render-func":s.content},null,8,["render-func"])]),_:2},1032,["name","disabled","onClick"]))),128)),F(e.$slots,"default")],2)}var St=N(Ct,[["render",It]]);function Ue(e){const t=W(e||"beforeLoad"),o=l(()=>t.value==="beforeLoad"),r=l(()=>t.value==="loading"),i=l(()=>t.value==="error"),a=l(()=>t.value==="loaded");return{status:t,isBeforeLoad:o,isLoading:r,isError:i,isLoaded:a,setLoadStatus:n=>{t.value=n}}}function Pt(e,t,o,r,i){let a=o,n=r;return o&&(e.width>t.width?a=0:(t.left>e.left&&(a-=Math.abs(e.left-t.left)/i),t.right<e.right&&(a+=Math.abs(e.right-t.right)/i))),r&&(e.height>t.height?n=0:(t.top>e.top&&(n-=Math.abs(e.top-t.top)/i),t.bottom<e.bottom&&(n+=Math.abs(e.bottom-t.bottom)/i))),[a,n]}function Lt(e){const{wrapperEl:t,imageEl:o,scale:r}=J(e),i=W([0,0]),a=W(!1);let n=0,f=0,s=[0,0];const m=()=>{if(!t.value||!o.value)return;const v=t.value.getBoundingClientRect(),T=o.value.getBoundingClientRect(),[g,P]=Pt(v,T,i.value[0],i.value[1],r.value);(g!==i.value[0]||P!==i.value[1])&&(i.value=[g,P])},u=v=>{v.preventDefault&&v.preventDefault();const T=s[0]+(v.pageX-n)/r.value,g=s[1]+(v.pageY-f)/r.value;i.value=[T,g]},k=v=>{v.preventDefault&&v.preventDefault(),a.value=!1,m(),j()},I=v=>{v.target===v.currentTarget&&(v.preventDefault&&v.preventDefault(),a.value=!0,n=v.pageX,f=v.pageY,s=[...i.value],de(window,"mousemove",u,!1),de(window,"mouseup",k,!1))};function j(){ve(window,"mousemove",u,!1),ve(window,"mouseup",k,!1)}return se(v=>{o.value&&de(o.value,"mousedown",I),v(()=>{o.value&&ve(o.value,"mousedown",I),j()})}),Ce([r],()=>{xe(()=>m())}),{translate:i,moving:a,resetTranslate(){i.value=[0,0]}}}const zt=S({name:"IconZoomOut",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-zoom-out`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),Ot=["stroke-width","stroke-linecap","stroke-linejoin"],jt=b("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15"},null,-1),Bt=[jt];function Nt(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},Bt,14,Ot)}var pe=N(zt,[["render",Nt]]);const Mt=Object.assign(pe,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+pe.name,pe)}}),At=S({name:"IconZoomIn",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-zoom-in`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),Vt=["stroke-width","stroke-linecap","stroke-linejoin"],Et=b("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15m7 7V15"},null,-1),Tt=[Et];function Ft(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},Tt,14,Vt)}var fe=N(At,[["render",Ft]]);const Wt=Object.assign(fe,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+fe.name,fe)}}),Zt=S({name:"IconFullscreen",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-fullscreen`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),Dt=["stroke-width","stroke-linecap","stroke-linejoin"],Rt=b("path",{d:"M42 17V9a1 1 0 0 0-1-1h-8M6 17V9a1 1 0 0 1 1-1h8m27 23v8a1 1 0 0 1-1 1h-8M6 31v8a1 1 0 0 0 1 1h8"},null,-1),Ut=[Rt];function qt(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},Ut,14,Dt)}var me=N(Zt,[["render",qt]]);const _t=Object.assign(me,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+me.name,me)}}),Gt=S({name:"IconRotateLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-rotate-left`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),Ht=["stroke-width","stroke-linecap","stroke-linejoin"],Yt=b("path",{d:"M10 22a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H11a1 1 0 0 1-1-1V22ZM23 11h11a6 6 0 0 1 6 6v6M22.5 12.893 19.587 11 22.5 9.107v3.786Z"},null,-1),Xt=[Yt];function Kt(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},Xt,14,Ht)}var ge=N(Gt,[["render",Kt]]);const Jt=Object.assign(ge,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+ge.name,ge)}}),Qt=S({name:"IconRotateRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-rotate-right`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),xt=["stroke-width","stroke-linecap","stroke-linejoin"],eo=b("path",{d:"M38 22a1 1 0 0 0-1-1H17a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V22ZM25 11H14a6 6 0 0 0-6 6v6M25.5 12.893 28.413 11 25.5 9.107v3.786Z"},null,-1),to=[eo];function oo(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},to,14,xt)}var ye=N(Qt,[["render",oo]]);const no=Object.assign(ye,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+ye.name,ye)}}),ro=S({name:"IconOriginalSize",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),r=l(()=>[o,`${o}-original-size`,{[`${o}-spin`]:e.spin}]),i=l(()=>{const n={};return e.size&&(n.fontSize=Y(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:r,innerStyle:i,onClick:n=>{t("click",n)}}}}),io=["stroke-width","stroke-linecap","stroke-linejoin"],so=b("path",{d:"m5.5 11.5 5-2.5h1v32M34 11.5 39 9h1v32"},null,-1),ao=b("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z",fill:"currentColor",stroke:"none"},null,-1),lo=b("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z"},null,-1),uo=[so,ao,lo];function co(e,t,o,r,i,a){return p(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:d(e.cls),style:Z(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...n)=>e.onClick&&e.onClick(...n))},uo,14,io)}var ke=N(ro,[["render",co]]);const vo=Object.assign(ke,{install:(e,t)=>{var o;const r=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(r+ke.name,ke)}});function po(e){const{container:t,hidden:o}=J(e);let r=!1,i={};const a=s=>s.tagName==="BODY"?window.innerWidth-(document.body.clientWidth||document.documentElement.clientWidth):s.offsetWidth-s.clientWidth,n=()=>{if(t.value&&t.value.style.overflow!=="hidden"){const s=t.value.style;r=!0;const m=a(t.value);m&&(i.width=s.width,t.value.style.width=`calc(${t.value.style.width||"100%"} - ${m}px)`),i.overflow=s.overflow,t.value.style.overflow="hidden"}},f=()=>{if(t.value&&r){const s=i;Object.keys(s).forEach(m=>{t.value.style[m]=s[m]})}r=!1,i={}};return se(s=>{o.value?n():f(),s(()=>{f()})}),[f,n]}function fo(e,t){const{popupContainer:o}=J(t);return l(()=>(_e(o.value)?lt(o.value):o.value)||e)}const E=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map(e=>+(e/100).toFixed(2)),mo=E[0],go=E[E.length-1];function je(e=1,t="zoomIn"){let o=E.indexOf(e);return o===-1&&(o=yo(e)),t==="zoomIn"?o===E.length-1?e:E[o+1]:o===0?e:E[o-1]}function yo(e){let t=E.length-1;for(let o=0;o<E.length;o++){const r=E[o];if(e===r){t=o;break}if(e<r){const i=E[o-1];t=i===void 0||Math.abs(i-e)<=Math.abs(r-e)?o-1:o;break}}return t}var ko=Object.defineProperty,Be=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,Ne=(e,t,o)=>t in e?ko(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ho=(e,t)=>{for(var o in t||(t={}))$o.call(t,o)&&Ne(e,o,t[o]);if(Be)for(var o of Be(t))wo.call(t,o)&&Ne(e,o,t[o]);return e};const $e=90;var bo=S({name:"ImagePreview",components:{PreviewArrow:ht,PreviewToolbar:St,IconLoading:We,IconClose:vt},props:{renderToBody:{type:Boolean,default:!0},src:{type:String},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[Object,String]},inGroup:{type:Boolean,default:!1},groupArrowProps:{type:Object,default:()=>({})}},emits:["close","update:visible"],setup(e,{emit:t}){const{t:o}=Re(),{src:r,popupContainer:i,visible:a,defaultVisible:n,maskClosable:f}=J(e),s=W(),m=W(),u=M("image-preview"),[k,I]=ae(n.value,q({value:a})),j=l(()=>[u,{[`${u}-hide`]:!k.value}]),v=fo(document.body,q({popupContainer:i})),T=l(()=>v.value===document.body),{zIndex:g}=ut("dialog",{visible:k}),P=l(()=>{const C=T.value?{zIndex:g.value,position:"fixed"}:{zIndex:"inherit",position:"absolute"};return ho({},C)}),{isLoading:D,isLoaded:_,setLoadStatus:G}=Ue(),B=W(0),w=W(1),{translate:R,moving:ee,resetTranslate:te}=Lt(q({wrapperEl:s,imageEl:m,visible:k,scale:w})),c=W(!1);let h=null;const U=()=>{!c.value&&(c.value=!0),h&&clearTimeout(h),h=setTimeout(()=>{c.value=!1},1e3)};po(q({container:v,hidden:k}));function H(){B.value=0,w.value=1,te()}Ce([r,k],()=>{k.value&&(H(),G("loading"))});function A(){k.value&&(t("close"),t("update:visible",!1),I(!1))}function L(C){f.value&&C.target===C.currentTarget&&A()}function V(C){w.value!==C&&(w.value=C,U())}return{prefixCls:u,classNames:j,container:v,wrapperStyles:P,scale:w,translate:R,rotate:B,moving:ee,mergedVisible:k,isLoading:D,isLoaded:_,scaleValueVisible:c,refWrapper:s,refImage:m,onMaskClick:L,onCloseClick:A,onImgLoad(){G("loaded")},onImgError(){G("error")},actions:l(()=>[{key:"fullScreen",name:o("imagePreview.fullScreen"),content:()=>Q(_t),onClick:()=>{const C=s.value.getBoundingClientRect(),ie=m.value.getBoundingClientRect(),le=C.height/(ie.height/w.value),ue=C.width/(ie.width/w.value),ce=Math.max(le,ue);V(ce)}},{key:"rotateRight",name:o("imagePreview.rotateRight"),content:()=>Q(no),onClick:()=>{B.value=(B.value+$e)%360}},{key:"rotateLeft",name:o("imagePreview.rotateLeft"),content:()=>Q(Jt),onClick:()=>{B.value=B.value===0?360-$e:B.value-$e}},{key:"zoomIn",name:o("imagePreview.zoomIn"),content:()=>Q(Wt),onClick:()=>{const C=je(w.value,"zoomIn");V(C)},disabled:w.value===go},{key:"zoomOut",name:o("imagePreview.zoomOut"),content:()=>Q(Mt),onClick:()=>{const C=je(w.value,"zoomOut");V(C)},disabled:w.value===mo},{key:"originalSize",name:o("imagePreview.originalSize"),content:()=>Q(vo),onClick:()=>{V(1)}}])}}});const Co=["src"];function Io(e,t,o,r,i,a){const n=z("IconLoading"),f=z("PreviewToolbar"),s=z("IconClose"),m=z("PreviewArrow");return p(),x(nt,{to:e.container,disabled:!e.renderToBody},[b("div",{class:d(e.classNames),style:Z(e.wrapperStyles)},[O(ze,{name:"image-fade",onBeforeEnter:t[0]||(t[0]=u=>{u.parentNode.style.display="block"}),onAfterLeave:t[1]||(t[1]=u=>{u.parentNode.style.display=""})},{default:K(()=>[et(b("div",{class:d(`${e.prefixCls}-mask`)},null,2),[[tt,e.mergedVisible]])]),_:1}),e.mergedVisible?(p(),y("div",{key:0,ref:"refWrapper",class:d(`${e.prefixCls}-wrapper`),onClick:t[6]||(t[6]=(...u)=>e.onMaskClick&&e.onMaskClick(...u))},[$(" img "),b("div",{class:d(`${e.prefixCls}-img-container`),style:Z({transform:`scale(${e.scale}, ${e.scale})`}),onClick:t[4]||(t[4]=(...u)=>e.onMaskClick&&e.onMaskClick(...u))},[(p(),y("img",{ref:"refImage",key:e.src,src:e.src,class:d([`${e.prefixCls}-img`,{[`${e.prefixCls}-img-moving`]:e.moving}]),style:Z({transform:`translate(${e.translate[0]}px, ${e.translate[1]}px) rotate(${e.rotate}deg)`}),onLoad:t[2]||(t[2]=(...u)=>e.onImgLoad&&e.onImgLoad(...u)),onError:t[3]||(t[3]=(...u)=>e.onImgError&&e.onImgError(...u))},null,46,Co))],6),$(" loading "),e.isLoading?(p(),y("div",{key:0,class:d(`${e.prefixCls}-loading`)},[O(n)],2)):$("v-if",!0),$(" scale value "),O(ze,{name:"image-fade"},{default:K(()=>[e.scaleValueVisible?(p(),y("div",{key:0,class:d(`${e.prefixCls}-scale-value`)},ne((e.scale*100).toFixed(0))+"% ",3)):$("v-if",!0)]),_:1}),$(" toolbar "),e.isLoaded&&e.actionsLayout.length?(p(),x(f,{key:1,actions:e.actions,"actions-layout":e.actionsLayout},{default:K(()=>[F(e.$slots,"actions")]),_:3},8,["actions","actions-layout"])):$("v-if",!0),$(" close btn "),e.closable?(p(),y("div",{key:2,class:d(`${e.prefixCls}-close-btn`),onClick:t[5]||(t[5]=(...u)=>e.onCloseClick&&e.onCloseClick(...u))},[O(s)],2)):$("v-if",!0),$(" group arrow "),e.inGroup?(p(),x(m,ot(re({key:3},e.groupArrowProps)),null,16)):$("v-if",!0)],2)):$("v-if",!0)],6)],8,["to","disabled"])}var oe=N(bo,[["render",Io]]);function Me(e){if(X(e))return;if(!Y(e)&&/^\d+(%)$/.test(e))return e;const t=parseInt(e,10);return Y(t)?`${t}px`:void 0}const qe=Symbol("PreviewGroupInjectionKey");var So=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,Lo=Object.prototype.propertyIsEnumerable,Ve=(e,t,o)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Ee=(e,t)=>{for(var o in t||(t={}))Po.call(t,o)&&Ve(e,o,t[o]);if(Ae)for(var o of Ae(t))Lo.call(t,o)&&Ve(e,o,t[o]);return e};let zo=0;const Oo=S({name:"Image",components:{IconImageClose:Ke,IconLoading:We,ImageFooter:kt,ImagePreview:oe},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},src:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},title:{type:String},description:{type:String},fit:{type:String},alt:{type:String},hideFooter:{type:[Boolean,String],default:!1},footerPosition:{type:String,default:"inner"},showLoader:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},previewVisible:{type:Boolean,default:void 0},defaultPreviewVisible:{type:Boolean,default:!1},previewProps:{type:Object},footerClass:{type:[String,Array,Object]}},emits:["preview-visible-change","update:previewVisible"],setup(e,{attrs:t,slots:o,emit:r}){const{t:i}=Re(),{height:a,width:n,hideFooter:f,title:s,description:m,src:u,footerPosition:k,defaultPreviewVisible:I,previewVisible:j,preview:v,previewProps:T}=J(e),g=rt(qe,void 0),P=M("image"),D=W(),{isLoaded:_,isError:G,isLoading:B,setLoadStatus:w}=Ue(),R=l(()=>({width:Me(n==null?void 0:n.value),height:Me(a==null?void 0:a.value)})),ee=l(()=>e.fit?{objectFit:e.fit}:{}),te=l(()=>[`${P}`,{[`${P}-loading`]:B.value,[`${P}-loading-error`]:G.value,[`${P}-with-footer-inner`]:_&&h&&k.value==="inner",[`${P}-with-footer-outer`]:_&&h&&k.value==="outer"},t.class]),c=l(()=>[R.value,t.style]),h=l(()=>s!=null&&s.value||m!=null&&m.value||o.extra?Ge(f.value)?!f.value&&_.value:f.value==="never":!1),U=l(()=>ct(t,["class","style"])),[H,A]=ae(I.value,q({value:j})),L=l(()=>!(g!=null&&g.preview)&&v.value);se(()=>{dt||!D.value||(D.value.src=u==null?void 0:u.value,w("loading"))});const V=zo++;se(ce=>{var Ie,Se,Pe;const Le=(Pe=g==null?void 0:g.registerImageUrl)==null?void 0:Pe.call(g,V,((Se=(Ie=T==null?void 0:T.value)==null?void 0:Ie.src)!=null?Se:u==null?void 0:u.value)||"",v.value);ce(()=>{Le==null||Le()})});function C(){w("loaded")}function ie(){w("error")}function le(){v.value&&(g!=null&&g.preview?g.preview(V):(r("preview-visible-change",!0),A(!0)))}function ue(){r("preview-visible-change",!1),A(!1)}return{t:i,refImg:D,prefixCls:P,wrapperClassNames:te,wrapperStyles:c,showFooter:h,imgProps:U,imgStyle:R,isLoaded:_,isError:G,isLoading:B,mergedPreviewVisible:H,mergePreview:L,onImgLoaded:C,onImgLoadError:ie,onImgClick:le,onPreviewClose:ue,fitStyle:ee}}}),jo=["title","alt"];function Bo(e,t,o,r,i,a){const n=z("IconImageClose"),f=z("IconLoading"),s=z("ImageFooter"),m=z("ImagePreview");return p(),y("div",{class:d(e.wrapperClassNames),style:Z(e.wrapperStyles)},[b("img",re({ref:"refImg",class:`${e.prefixCls}-img`},e.imgProps,{style:Ee(Ee({},e.imgStyle),e.fitStyle),title:e.title,alt:e.alt,onLoad:t[0]||(t[0]=(...u)=>e.onImgLoaded&&e.onImgLoaded(...u)),onError:t[1]||(t[1]=(...u)=>e.onImgLoadError&&e.onImgLoadError(...u)),onClick:t[2]||(t[2]=(...u)=>e.onImgClick&&e.onImgClick(...u))}),null,16,jo),e.isLoaded?$("v-if",!0):(p(),y("div",{key:0,class:d(`${e.prefixCls}-overlay`)},[e.isError?F(e.$slots,"error",{key:0},()=>[b("div",{class:d(`${e.prefixCls}-error`)},[b("div",{class:d(`${e.prefixCls}-error-icon`)},[F(e.$slots,"error-icon",{},()=>[O(n)])],2),e.alt||e.description?(p(),y("div",{key:0,class:d(`${e.prefixCls}-error-alt`)},ne(e.alt||e.description),3)):$("v-if",!0)],2)]):$("v-if",!0),e.isLoading&&(e.showLoader||e.$slots.loader)?F(e.$slots,"loader",{key:1},()=>[b("div",{class:d([`${e.prefixCls}-loader`])},[b("div",{class:d(`${e.prefixCls}-loader-spin`)},[O(f),b("div",{class:d(`${e.prefixCls}-loader-spin-text`)},ne(e.t("image.loading")),3)],2)],2)]):$("v-if",!0)],2)),e.showFooter?(p(),x(s,{key:1,class:d(e.footerClass),"prefix-cls":e.prefixCls,title:e.title,description:e.description},De({_:2},[e.$slots.extra?{name:"extra",fn:K(()=>[F(e.$slots,"extra")])}:void 0]),1032,["class","prefix-cls","title","description"])):$("v-if",!0),e.isLoaded&&e.mergePreview?(p(),x(m,re({key:2,src:e.src},e.previewProps,{visible:e.mergedPreviewVisible,"render-to-body":e.renderToBody,onClose:e.onPreviewClose}),{actions:K(()=>[F(e.$slots,"preview-actions")]),_:3},16,["src","visible","render-to-body","onClose"])):$("v-if",!0)],6)}var we=N(Oo,[["render",Bo]]),No=S({name:"ImagePreviewGroup",components:{ImagePreview:oe},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},srcList:{type:Array},current:{type:Number},defaultCurrent:{type:Number,default:0},infinite:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[Object,String]}},emits:["change","update:current","visible-change","update:visible"],setup(e,{emit:t}){const{srcList:o,visible:r,defaultVisible:i,current:a,defaultCurrent:n,infinite:f}=J(e),[s,m]=ae(i.value,q({value:r})),u=c=>{c!==s.value&&(t("visible-change",c),t("update:visible",c),m(c))},k=l(()=>new Map(He(o==null?void 0:o.value)?o==null?void 0:o.value.map((c,h)=>[h,{url:c,canPreview:!0}]):[])),I=W(new Map(k.value||[])),j=l(()=>Array.from(I.value.keys())),v=l(()=>j.value.length);function T(c,h,U){return k.value.has(c)||I.value.set(c,{url:h,canPreview:U}),function(){k.value.has(c)||I.value.delete(c)}}Ce(k,()=>{I.value=new Map(k.value||[])});const[g,P]=ae(n.value,q({value:a})),D=c=>{c!==g.value&&(t("change",c),t("update:current",c),P(c))},_=l(()=>j.value[g.value]),G=c=>{const h=j.value.indexOf(c);h!==g.value&&D(h)},B=l(()=>{var c;return(c=I.value.get(_.value))==null?void 0:c.url});it(qe,q({registerImageUrl:T,preview:c=>{u(!0),G(c)}}));const w=l(()=>{const c=(U,H)=>{var A;for(let L=U;L<=H;L++){const V=j.value[L];if((A=I.value.get(V))!=null&&A.canPreview)return L}},h=c(g.value+1,v.value-1);return X(h)&&f.value?c(0,g.value-1):h}),R=l(()=>{const c=(U,H)=>{var A;for(let L=U;L>=H;L--){const V=j.value[L];if((A=I.value.get(V))!=null&&A.canPreview)return L}},h=c(g.value-1,0);return X(h)&&f.value?c(v.value-1,g.value+1):h}),ee=l(()=>X(R.value)?void 0:()=>{!X(R.value)&&D(R.value)}),te=l(()=>X(w.value)?void 0:()=>{!X(w.value)&&D(w.value)});return{mergedVisible:s,currentUrl:B,prevIndex:R,nextIndex:w,onClose(){u(!1)},groupArrowProps:q({onPrev:ee,onNext:te})}}}),Mo=Object.defineProperty,Ao=Object.defineProperties,Vo=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Eo=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Fe=(e,t,o)=>t in e?Mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Fo=(e,t)=>{for(var o in t||(t={}))Eo.call(t,o)&&Fe(e,o,t[o]);if(Te)for(var o of Te(t))To.call(t,o)&&Fe(e,o,t[o]);return e},Wo=(e,t)=>Ao(e,Vo(t));function Zo(e,t,o,r,i,a){const n=z("ImagePreview");return p(),y(Ze,null,[F(e.$slots,"default"),O(n,re(Wo(Fo({},e.$attrs),{groupArrowProps:e.groupArrowProps}),{"in-group":"",src:e.currentUrl,visible:e.mergedVisible,"mask-closable":e.maskClosable,closable:e.closable,"actions-layout":e.actionsLayout,"popup-container":e.popupContainer,"render-to-body":e.renderToBody,onClose:e.onClose}),De({_:2},[e.$slots.actions?{name:"actions",fn:K(()=>[F(e.$slots,"actions",{url:e.currentUrl})])}:void 0]),1040,["src","visible","mask-closable","closable","actions-layout","popup-container","render-to-body","onClose"])],64)}var he=N(No,[["render",Zo]]);const Ko=Object.assign(we,{Preview:oe,PreviewGroup:he,install:(e,t)=>{Ye(e,t);const o=Xe(t);e.component(o+we.name,we),e.component(o+oe.name,oe),e.component(o+he.name,he),e.component(o+be.name,be)}});export{Ko as I};
