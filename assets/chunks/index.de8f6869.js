import{g as V,b as w,c as q,d as Q,e as P,_ as W,s as X,a as Y}from"./index.8a7f7853.js";import{u as Z}from"./use-responsive-state.41259235.js";import{u as ee}from"./use-size.d0f4c4cf.js";import{d as L,a5 as M,g as p,a6 as j,a0 as ae,O as o,a9 as D,L as z,V as le,h as te,j as ne,J as se,a7 as re,r as oe,D as ue}from"./framework.683b9a23.js";import{u as ce}from"./use-index.0b51a5ca.js";const R=Symbol("ArcoDescriptions");var ie=Object.defineProperty,A=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,k=(a,s,r)=>s in a?ie(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r,E=(a,s)=>{for(var r in s||(s={}))de.call(s,r)&&k(a,r,s[r]);if(A)for(var r of A(s))ve.call(s,r)&&k(a,r,s[r]);return a};const N=a=>a?a.reduce((s,r)=>s+r.span,0):0;var O=L({name:"Descriptions",props:{data:{type:Array,default:()=>[]},column:{type:[Number,Object],default:3},title:String,layout:{type:String,default:"horizontal"},align:{type:[String,Object],default:"left"},size:{type:String},bordered:{type:Boolean,default:!1},labelStyle:{type:Object},valueStyle:{type:Object},tableLayout:{type:String,default:"auto"}},setup(a,{slots:s}){const{column:r,size:m}=M(a),n=V("descriptions"),{mergedSize:c}=ee(m),i=Z(r,3,!0),_=p(()=>{var e;return(e=w(a.align)?a.align.label:a.align)!=null?e:"left"}),S=p(()=>{var e;return(e=w(a.align)?a.align.value:a.align)!=null?e:"left"}),f=p(()=>E({textAlign:_.value},a.labelStyle)),d=p(()=>E({textAlign:S.value},a.valueStyle)),v=j(new Map),T=p(()=>Array.from(v.values()).sort((e,l)=>e.index-l.index).map(e=>e.span));ae(R,j({addItem:(e,l)=>{v.set(e,l)},removeItem:e=>{v.delete(e)}}));const C=e=>{const l=[];if(e.forEach((t,u)=>{var y;const b=Math.min((y=D(t)?T.value[u]:t.span)!=null?y:1,i.value),g=l[l.length-1],$=N(g);$===0||$>=i.value?l.push([{data:t,span:b}]):g.push({data:t,span:b+$>i.value?i.value-$:b})}),l.length){const t=l[l.length-1],u=N(t);u<i.value&&(t[t.length-1].span+=i.value-u)}return l},B=p(()=>{var e;return C((e=a.data)!=null?e:[])}),I=(e,l)=>{var t,u,y,b,g;return D(e)?Q(e,e.children)&&((u=(t=e.children).label)==null?void 0:u.call(t))||((y=e.props)==null?void 0:y.label):(g=(b=s.label)==null?void 0:b.call(s,{label:e.label,index:l,data:e}))!=null?g:P(e.label)?e.label():e.label},h=(e,l)=>{var t,u;return D(e)?e:(u=(t=s.value)==null?void 0:t.call(s,{value:e.value,index:l,data:e}))!=null?u:P(e.value)?e.value():e.value},F=e=>o(z,null,[o("tr",{class:`${n}-row`},[e.map((l,t)=>o("td",{key:`label-${t}`,class:[`${n}-item-label`,`${n}-item-label-block`],style:f.value,colspan:l.span},[I(l.data,t)]))]),o("tr",{class:`${n}-row`},[e.map((l,t)=>o("td",{key:`value-${t}`,class:[`${n}-item-value`,`${n}-item-value-block`],style:d.value,colspan:l.span},[h(l.data,t)]))])]),G=(e,l)=>o("tr",{class:`${n}-row`,key:`tr-${l}`},[e.map(t=>o(z,null,[o("td",{class:[`${n}-item-label`,`${n}-item-label-block`],style:f.value},[I(t.data,l)]),o("td",{class:[`${n}-item-value`,`${n}-item-value-block`],style:d.value,colspan:t.span*2-1},[h(t.data,l)])]))]),U=(e,l)=>o("tr",{class:`${n}-row`,key:`inline-${l}`},[e.map((t,u)=>o("td",{key:`item-${u}`,class:`${n}-item`,colspan:t.span},[o("div",{class:[`${n}-item-label`,`${n}-item-label-inline`],style:f.value},[I(t.data,u)]),o("div",{class:[`${n}-item-value`,`${n}-item-value-inline`],style:d.value},[h(t.data,u)])]))]),H=(e,l)=>["inline-horizontal","inline-vertical"].includes(a.layout)?U(e,l):a.layout==="vertical"?F(e):G(e,l),J=p(()=>[n,`${n}-layout-${a.layout}`,`${n}-size-${c.value}`,{[`${n}-border`]:a.bordered},{[`${n}-table-layout-fixed`]:a.tableLayout==="fixed"}]),K=()=>{var e,l;const t=(l=(e=s.title)==null?void 0:e.call(s))!=null?l:a.title;return t?o("div",{class:`${n}-title`},[t]):null};return()=>{const e=s.default?C(q(s.default())):B.value;return o("div",{class:J.value},[K(),o("div",{class:`${n}-body`},[o("table",{class:`${n}-table`},[o("tbody",null,[e.map((l,t)=>H(l,t))])])])])}}});const pe=L({name:"DescriptionsItem",props:{span:{type:Number,default:1},label:String},setup(a){var s;const{span:r}=M(a),m=V("descriptions"),n=le(R,{}),c=ue(),i=te(),{computedIndex:_}=ce({itemRef:i,selector:`.${m}-item-value`,parentClassName:`${m}-table`}),S=j({index:_,span:r});c!=null&&c.uid&&((s=n.addItem)==null||s.call(n,c.uid,S));const f=()=>{var d;const v=((d=c==null?void 0:c.proxy)==null?void 0:d.$el).parentElement;v&&v!==i.value&&(i.value=v)};return ne(()=>f()),se(()=>f()),re(()=>{var d;c!=null&&c.uid&&((d=n.removeItem)==null||d.call(n,c.uid))}),{prefixCls:m}}});function me(a,s,r,m,n,c){return oe(a.$slots,"default")}var x=W(pe,[["render",me]]);const Ie=Object.assign(O,{DescriptionsItem:x,install:(a,s)=>{X(a,s);const r=Y(s);a.component(r+O.name,O),a.component(r+x.name,x)}});export{Ie as D,x as a};
