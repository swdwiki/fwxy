import{k as Ze,j as qe,m as Ge,e as Ke,g as Ye,f as Je,n as Qe,o as Re,s as et,a as tt}from"./index.8a7f7853.js";import{h as m,j as F,J as G,d as K,x,a7 as Y,s as lt,a5 as ot,g as T,V as fe,a0 as nt,a6 as rt,ah as at,O as y,af as it,U as st,T as ut,ac as dt,ad as ft,L as ct,E as ce}from"./framework.683b9a23.js";import{i as Te}from"./ResizeObserver.es.0f9f8adb.js";const Me=typeof window>"u"?global:window,ht=Me.requestAnimationFrame,he=Me.cancelAnimationFrame;function ve(t){let e=0;const l=(...o)=>{e&&he(e),e=ht(()=>{t(...o),e=0})};return l.cancel=()=>{he(e),e=0},l}const J=()=>{},Q=(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})(),X=(()=>Q?J:(t,e,l,o=!1)=>{t.addEventListener(e,l,o)})(),me=(()=>Q?J:(t,e,l,o=!1)=>{t.removeEventListener(e,l,o)})(),vt=(t,e)=>{var l;return Q?J():(l=(e??document).querySelector(t))!=null?l:void 0},we=(t,e)=>{if(Ze(t)){const l=t[0]==="#"?`[id='${t.slice(1)}']`:t;return vt(l,e)}return t},Rt=(t,e)=>{const l=t.getBoundingClientRect(),o=e.getBoundingClientRect();return{top:l.top-o.top,bottom:o.bottom-l.bottom,left:l.left-o.left,right:o.right-l.right,width:l.width,height:l.height}};var mt=Object.defineProperty,be=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,ge=(t,e,l)=>e in t?mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,gt=(t,e)=>{for(var l in e||(e={}))wt.call(e,l)&&ge(t,l,e[l]);if(be)for(var l of be(e))bt.call(e,l)&&ge(t,l,e[l]);return t};const yt=(t,e)=>{const l=gt({},t);for(const o of e)o in l&&delete l[o];return l};var pt=Object.defineProperty,ye=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,pe=(t,e,l)=>e in t?pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,M=(t,e)=>{for(var l in e||(e={}))_t.call(e,l)&&pe(t,l,e[l]);if(ye)for(var l of ye(e))Ot.call(e,l)&&pe(t,l,e[l]);return t};const St=()=>{const{body:t}=document,e=document.documentElement;let l;try{l=(window.top||window.self||window).document.body}catch{}return{height:Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight,(l==null?void 0:l.scrollHeight)||0,(l==null?void 0:l.clientHeight)||0),width:Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth,(l==null?void 0:l.scrollWidth)||0,(l==null?void 0:l.clientWidth)||0)}},Ct=()=>{const{height:t,width:e}=St();return{width:Math.min(e,window.innerWidth),height:Math.min(t,window.innerHeight)}},_e=(t,e)=>{var l,o;const r=t.getBoundingClientRect();return{top:r.top,bottom:r.bottom,left:r.left,right:r.right,scrollTop:r.top-e.top,scrollBottom:r.bottom-e.top,scrollLeft:r.left-e.left,scrollRight:r.right-e.left,width:(l=t.offsetWidth)!=null?l:t.clientWidth,height:(o=t.offsetHeight)!=null?o:t.clientHeight}},Pt=t=>{switch(t){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},j=(t,e)=>{switch(e){case"top":switch(t){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return t}case"bottom":switch(t){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return t}case"left":switch(t){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return t}case"right":switch(t){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return t}default:return t}},Et=(t,e,{containerRect:l,triggerRect:o,popupRect:r,offset:i,translate:a})=>{const d=Pt(t),u=Ct(),f={top:l.top+e.top,bottom:u.height-(l.top+e.top+r.height),left:l.left+e.left,right:u.width-(l.left+e.left+r.width)};let c=t;if(d==="top"&&f.top<0)if(o.top>r.height)e.top=-l.top;else{const v=B("bottom",o,r,{offset:i,translate:a});u.height-(l.top+v.top+r.height)>0&&(c=j(t,"bottom"),e.top=v.top)}if(d==="bottom"&&f.bottom<0)if(u.height-o.bottom>r.height)e.top=-l.top+(u.height-r.height);else{const v=B("top",o,r,{offset:i,translate:a});l.top+v.top>0&&(c=j(t,"top"),e.top=v.top)}if(d==="left"&&f.left<0)if(o.left>r.width)e.left=-l.left;else{const v=B("right",o,r,{offset:i,translate:a});u.width-(l.left+v.left+r.width)>0&&(c=j(t,"right"),e.left=v.left)}if(d==="right"&&f.right<0)if(u.width-o.right>r.width)e.left=-l.left+(u.width-r.width);else{const v=B("left",o,r,{offset:i,translate:a});l.left+v.left>0&&(c=j(t,"left"),e.left=v.left)}return(d==="top"||d==="bottom")&&(f.left<0?e.left=-l.left:f.right<0&&(e.left=-l.left+(u.width-r.width))),(d==="left"||d==="right")&&(f.top<0?e.top=-l.top:f.bottom<0&&(e.top=-l.top+(u.height-r.height))),{popupPosition:e,position:c}},B=(t,e,l,{offset:o=0,translate:r=[0,0]}={})=>{var i;const a=(i=qe(r)?r:r[t])!=null?i:[0,0];switch(t){case"top":return{left:e.scrollLeft+Math.round(e.width/2)-Math.round(l.width/2)+a[0],top:e.scrollTop-l.height-o+a[1]};case"tl":return{left:e.scrollLeft+a[0],top:e.scrollTop-l.height-o+a[1]};case"tr":return{left:e.scrollRight-l.width+a[0],top:e.scrollTop-l.height-o+a[1]};case"bottom":return{left:e.scrollLeft+Math.round(e.width/2)-Math.round(l.width/2)+a[0],top:e.scrollBottom+o+a[1]};case"bl":return{left:e.scrollLeft+a[0],top:e.scrollBottom+o+a[1]};case"br":return{left:e.scrollRight-l.width+a[0],top:e.scrollBottom+o+a[1]};case"left":return{left:e.scrollLeft-l.width-o+a[0],top:e.scrollTop+Math.round(e.height/2)-Math.round(l.height/2)+a[1]};case"lt":return{left:e.scrollLeft-l.width-o+a[0],top:e.scrollTop+a[1]};case"lb":return{left:e.scrollLeft-l.width-o+a[0],top:e.scrollBottom-l.height+a[1]};case"right":return{left:e.scrollRight+o+a[0],top:e.scrollTop+Math.round(e.height/2)-Math.round(l.height/2)+a[1]};case"rt":return{left:e.scrollRight+o+a[0],top:e.scrollTop+a[1]};case"rb":return{left:e.scrollRight+o+a[0],top:e.scrollBottom-l.height+a[1]};default:return{left:0,top:0}}},Tt=t=>{let e="0";["top","bottom"].includes(t)?e="50%":["left","lt","lb","tr","br"].includes(t)&&(e="100%");let l="0";return["left","right"].includes(t)?l="50%":["top","tl","tr","lt","rt"].includes(t)&&(l="100%"),`${e} ${l}`},Mt=(t,e,l,o,{offset:r=0,translate:i=[0,0],customStyle:a={},autoFitPosition:d=!1}={})=>{let u=t,f=B(t,l,o,{offset:r,translate:i});if(d){const v=Et(t,f,{containerRect:e,popupRect:o,triggerRect:l,offset:r,translate:i});f=v.popupPosition,u=v.position}return{style:M({left:`${f.left}px`,top:`${f.top}px`},a),position:u}},Bt=(t,e,l,{customStyle:o={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(t)){let i=Math.abs(e.scrollLeft+e.width/2-l.scrollLeft);return i>l.width-8&&(e.width>l.width?i=l.width/2:i=l.width-8),["top","tl","tr"].includes(t)?M({left:`${i}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},o):M({left:`${i}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)}let r=Math.abs(e.scrollTop+e.height/2-l.scrollTop);return r>l.height-8&&(e.height>l.height?r=l.height/2:r=l.height-8),["left","lt","lb"].includes(t)?M({top:`${r}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},o):M({top:`${r}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)},xt=t=>t.scrollHeight>t.offsetHeight||t.scrollWidth>t.offsetWidth,Oe=t=>{var e;const l=[];let o=t;for(;o&&o!==document.documentElement;)xt(o)&&l.push(o),o=(e=o.parentElement)!=null?e:void 0;return l},Be=()=>{const t={},e=m(),l=()=>{const o=Ge(t.value);o!==e.value&&(e.value=o)};return F(()=>l()),G(()=>l()),{children:t,firstElement:e}};var Se=K({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(t,{emit:e,slots:l}){const{children:o,firstElement:r}=Be();let i;const a=u=>{u&&(i=new Te(f=>{const c=f[0];e("resize",c)}),i.observe(u))},d=()=>{i&&(i.disconnect(),i=null)};return x(r,u=>{i&&d(),u&&a(u)}),Y(()=>{i&&d()}),()=>{var u;return o.value=(u=l.default)==null?void 0:u.call(l),o.value}}});function Ft(t,e){const l=m(t[e]);return G(()=>{const o=t[e];l.value!==o&&(l.value=o)}),l}const Ce=Symbol("ArcoTrigger"),zt=1e3,Lt=5e3,At=1;class $t{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=e=>(e==="message"?Array.from(this.popupStack.message).pop()||Lt:Array.from(this.popupStack.popup).pop()||zt)+At,this.add=e=>{const l=this.getNextZIndex(e);return this.popupStack[e].add(l),e==="dialog"&&this.popupStack.popup.add(l),l},this.delete=(e,l)=>{this.popupStack[l].delete(e),l==="dialog"&&this.popupStack.popup.delete(e)},this.isLastDialog=e=>this.popupStack.dialog.size>1?e===Array.from(this.popupStack.dialog).pop():!0}}const Z=new $t;function Wt(t,{visible:e,runOnMounted:l}={}){const o=m(0),r=()=>{o.value=Z.add(t)},i=()=>{Z.delete(o.value,t)},a=()=>t==="dialog"?Z.isLastDialog(o.value):!1;return x(()=>e==null?void 0:e.value,d=>{d?r():i()},{immediate:!0}),l&&(F(()=>{r()}),Y(()=>{i()})),{zIndex:lt(o),open:r,close:i,isLastDialog:a}}const jt=({elementRef:t,onResize:e})=>{let l;return{createResizeObserver:()=>{t.value&&(l=new Te(i=>{const a=i[0];Ke(e)&&e(a)}),l.observe(t.value))},destroyResizeObserver:()=>{l&&(l.disconnect(),l=null)}}};var Dt=K({name:"ClientOnly",setup(t,{slots:e}){const l=m(!1);return F(()=>l.value=!0),()=>{var o;return l.value?(o=e.default)==null?void 0:o.call(e):null}}});const kt=({popupContainer:t,visible:e,defaultContainer:l="body",documentContainer:o})=>{const r=m(t.value),i=m(),a=()=>{const d=we(t.value),u=d?t.value:l,f=d??(o?document.documentElement:we(l));u!==r.value&&(r.value=u),f!==i.value&&(i.value=f)};return F(()=>a()),x(e,d=>{r.value!==t.value&&d&&a()}),{teleportContainer:r,containerRef:i}};var It=Object.defineProperty,Vt=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Ee=(t,e,l)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,Xt=(t,e)=>{for(var l in e||(e={}))Ht.call(e,l)&&Ee(t,l,e[l]);if(Pe)for(var l of Pe(e))Ut.call(e,l)&&Ee(t,l,e[l]);return t},Zt=(t,e)=>Vt(t,Nt(e));const qt=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var q=K({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1}},emits:{"update:popupVisible":t=>!0,popupVisibleChange:t=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(t,{emit:e,slots:l,attrs:o}){const{popupContainer:r}=ot(t),i=Ye("trigger"),a=T(()=>yt(o,qt)),d=fe(Je,void 0),u=T(()=>[].concat(t.trigger)),f=new Set,c=fe(Ce,void 0),{children:v,firstElement:C}=Be(),O=m(),R=m(t.defaultPopupVisible),z=m(t.position),ee=m({}),te=m({}),le=m({}),xe=m(),p=m({top:0,left:0}),h=T(()=>{var n;return(n=t.popupVisible)!=null?n:R.value}),{teleportContainer:Fe,containerRef:D}=kt({popupContainer:r,visible:h,documentContainer:!0}),{zIndex:ze}=Wt("popup",{visible:h});let P=0,_=!1,k=!1;const Le=()=>{P&&(window.clearTimeout(P),P=0)},I=n=>{if(t.alignPoint){const{pageX:s,pageY:w}=n;p.value={top:w,left:s}}},S=()=>{if(!C.value||!O.value||!D.value)return;const n=D.value.getBoundingClientRect(),s=t.alignPoint?{top:p.value.top,bottom:p.value.top,left:p.value.left,right:p.value.left,scrollTop:p.value.top,scrollBottom:p.value.top,scrollLeft:p.value.left,scrollRight:p.value.left,width:0,height:0}:_e(C.value,n),w=()=>_e(O.value,n),$=w(),{style:E,position:W}=Mt(t.position,n,s,$,{offset:t.popupOffset,translate:t.popupTranslate,customStyle:t.popupStyle,autoFitPosition:t.autoFitPosition});t.autoFitTransformOrigin&&(te.value={transformOrigin:Tt(W)}),t.autoFitPopupMinWidth?E.minWidth=`${s.width}px`:t.autoFitPopupWidth&&(E.width=`${s.width}px`),z.value!==W&&(z.value=W),ee.value=E,t.showArrow&&ce(()=>{le.value=Bt(W,s,w(),{customStyle:t.arrowStyle})})},b=(n,s)=>{if(n===h.value&&P===0)return;const w=()=>{R.value=n,e("update:popupVisible",n),e("popupVisibleChange",n),n&&ce(()=>{S()})};s?(Le(),n!==h.value&&(P=window.setTimeout(w,s))):w()},Ae=n=>{var s;(s=o.onClick)==null||s.call(o,n),!(t.disabled||h.value&&!t.clickToClose)&&(u.value.includes("click")?(I(n),b(!h.value)):u.value.includes("contextMenu")&&h.value&&b(!1))},oe=n=>{var s;(s=o.onMouseenter)==null||s.call(o,n),!(t.disabled||!u.value.includes("hover"))&&(I(n),b(!0,t.mouseEnterDelay))},ne=n=>{c==null||c.onMouseenter(n),oe(n)},re=n=>{var s;(s=o.onMouseleave)==null||s.call(o,n),!(t.disabled||!u.value.includes("hover"))&&b(!1,t.mouseLeaveDelay)},ae=n=>{c==null||c.onMouseleave(n),re(n)},$e=n=>{var s;(s=o.onFocusin)==null||s.call(o,n),!(t.disabled||!u.value.includes("focus"))&&b(!0,t.focusDelay)},We=n=>{var s;(s=o.onFocusout)==null||s.call(o,n),!(t.disabled||!u.value.includes("focus"))&&t.blurToClose&&b(!1)},je=n=>{var s;(s=o.onContextmenu)==null||s.call(o,n),!(t.disabled||!u.value.includes("contextMenu")||h.value&&!t.clickToClose)&&(I(n),b(!h.value),n.preventDefault())};nt(Ce,rt({onMouseenter:ne,onMouseleave:ae,addChildRef:n=>{f.add(n),c==null||c.addChildRef(n)},removeChildRef:n=>{f.delete(n),c==null||c.removeChildRef(n)}}));const V=()=>{me(document.documentElement,"mousedown",N),_=!1},ie=Ft(l,"content"),De=T(()=>{var n;return t.hideEmpty&&Qe((n=ie.value)==null?void 0:n.call(ie))}),N=n=>{var s,w,$;if(!((s=C.value)!=null&&s.contains(n.target)||(w=O.value)!=null&&w.contains(n.target))){for(const E of f)if(($=E.value)!=null&&$.contains(n.target))return;V(),b(!1)}},L=ve(()=>{h.value&&(t.scrollToClose||d!=null&&d.scrollToClose?b(!1):S())}),se=()=>{me(window,"scroll",ue),k=!1},ue=ve(()=>{b(!1),se()}),H=()=>{h.value&&S()},ke=()=>{H(),e("resize")},Ie=n=>{t.preventFocus&&n.preventDefault()};c==null||c.addChildRef(O);const Ve=T(()=>h.value?t.openedClass:void 0);let g;x(h,n=>{if(t.clickOutsideToClose&&(!n&&_?V():n&&!_&&(X(document.documentElement,"mousedown",N),_=!0)),(t.scrollToClose||d!=null&&d.scrollToClose)&&(X(window,"scroll",ue),k=!0),t.updateAtScroll||d!=null&&d.updateAtScroll){if(n){g=Oe(C.value);for(const s of g)s.addEventListener("scroll",L)}else if(g){for(const s of g)s.removeEventListener("scroll",L);g=void 0}}n&&(U.value=!0)}),x(()=>[t.autoFitPopupWidth,t.autoFitPopupMinWidth],()=>{h.value&&S()});const{createResizeObserver:Ne,destroyResizeObserver:He}=jt({elementRef:D,onResize:H});F(()=>{if(Ne(),h.value&&(S(),t.clickOutsideToClose&&!_&&(X(document.documentElement,"mousedown",N),_=!0),t.updateAtScroll||d!=null&&d.updateAtScroll)){g=Oe(C.value);for(const n of g)n.addEventListener("scroll",L)}}),G(()=>{h.value&&S()}),at(()=>{b(!1)}),Y(()=>{if(c==null||c.removeChildRef(O),He(),_&&V(),k&&se(),g){for(const n of g)n.removeEventListener("scroll",L);g=void 0}});const U=m(h.value),A=m(!1),de=()=>{A.value=!0},Ue=()=>{A.value=!1,h.value&&e("show")},Xe=()=>{A.value=!1,h.value||(U.value=!1,e("hide"))};return()=>{var n,s;return v.value=(s=(n=l.default)==null?void 0:n.call(l))!=null?s:[],Re(v.value,{class:Ve.value,onClick:Ae,onMouseenter:oe,onMouseleave:re,onFocusin:$e,onFocusout:We,onContextmenu:je}),y(ct,null,[t.autoFixPosition?y(Se,{onResize:ke},{default:()=>[v.value]}):v.value,y(Dt,null,{default:()=>[y(it,{to:Fe.value,disabled:!t.renderToBody},{default:()=>[(!t.unmountOnClose||h.value||U.value)&&!De.value&&y(Se,{onResize:H},{default:()=>[y("div",st({ref:O,class:[`${i}-popup`,`${i}-position-${z.value}`],style:Zt(Xt({},ee.value),{zIndex:ze.value,pointerEvents:A.value?"none":"auto"}),"trigger-placement":z.value,onMouseenter:ne,onMouseleave:ae,onMousedown:Ie},a.value),[y(ut,{name:t.animationName,duration:t.duration,appear:!0,onBeforeEnter:de,onAfterEnter:Ue,onBeforeLeave:de,onAfterLeave:Xe},{default:()=>{var w;return[dt(y("div",{class:`${i}-popup-wrapper`,style:te.value},[y("div",{class:[`${i}-content`,t.contentClass],style:t.contentStyle},[(w=l.content)==null?void 0:w.call(l)]),t.showArrow&&y("div",{ref:xe,class:[`${i}-arrow`,t.arrowClass],style:le.value},null)]),[[ft,h.value]])]}})])]})]})]})])}}});const el=Object.assign(q,{install:(t,e)=>{et(t,e);const l=tt(e);t.component(l+q.name,q)}});export{Se as R,el as T,me as a,yt as b,he as c,Rt as g,Q as i,X as o,vt as q,ht as r,Wt as u};
