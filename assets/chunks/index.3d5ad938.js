import{_ as Y,g as V,j as q,a as D,s as Z,d as ee}from"./index.ef976c7e.js";import{u as ae}from"./use-index.dacfec6f.js";import{R as re,I as oe}from"./index.d993b4ce.js";import{I as te}from"./index.a51f3d9e.js";import{d as W,a3 as M,O as ne,h as i,g as p,j as se,v as le,E as F,o as z,c as $,J as v,w as ie,k as w,n as y,F as ue,r as S,e as b,Q as R,R as de,Y as ce,a4 as ve,a as me}from"./framework.3448e2cd.js";import{P as ge}from"./index.b8dbcbb4.js";const _=Symbol("ArcoAvatarGroup");var pe=Object.defineProperty,B=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,G=(e,a,r)=>a in e?pe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,U=(e,a)=>{for(var r in a||(a={}))fe.call(a,r)&&G(e,r,a[r]);if(B)for(var r of B(a))he.call(a,r)&&G(e,r,a[r]);return e};const ye=W({name:"Avatar",components:{ResizeObserver:re,IconImageClose:te,IconLoading:oe},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:a,emit:r,attrs:u}){const{shape:C,size:f,autoFixFontSize:m,triggerType:d,triggerIconStyle:c}=M(e),t=V("avatar"),n=ne(_,void 0),l=i(),s=i(),H=p(()=>{var o;return(o=n==null?void 0:n.shape)!=null?o:C.value}),g=p(()=>{var o;return(o=n==null?void 0:n.size)!=null?o:f.value}),k=p(()=>{var o;return(o=n==null?void 0:n.autoFixFontSize)!=null?o:m.value}),I=i(!1),O=i(!1),A=i(!0),T=i(!1),x=n?ae({itemRef:l,selector:`.${t}`}).computedIndex:i(-1),J=p(()=>{var o;const h=q(g.value)?{width:`${g.value}px`,height:`${g.value}px`,fontSize:`${g.value/2}px`}:{};return n&&(h.zIndex=n.zIndexAscend?x.value+1:n.total-x.value,h.marginLeft=x.value!==0?`-${((o=g.value)!=null?o:40)/4}px`:"0"),h}),K=Ce({triggerIconStyle:c==null?void 0:c.value,inlineStyle:u.style,triggerType:d.value}),E=()=>{!I.value&&!e.imageUrl&&de(()=>{var o;if(!s.value||!l.value)return;const h=s.value.clientWidth,j=(o=g.value)!=null?o:l.value.offsetWidth,N=j/(h+8);j&&N<1&&(s.value.style.transform=`scale(${N}) translateX(-50%)`),A.value=!0})};se(()=>{var o;(o=s.value)!=null&&o.firstElementChild&&["IMG","PICTURE"].includes(s.value.firstElementChild.tagName)&&(I.value=!0),k.value&&E()}),le(f,()=>{k.value&&E()});const Q=p(()=>[t,`${t}-${H.value}`]),X=p(()=>I.value||e.imageUrl?`${t}-image`:`${t}-text`);return{prefixCls:t,itemRef:l,cls:Q,outerStyle:J,wrapperRef:s,wrapperCls:X,computedTriggerIconStyle:K,isImage:I,shouldLoad:A,isLoaded:T,hasError:O,onClick:o=>{r("click",o)},handleResize:()=>{k.value&&E()},handleImgLoad:()=>{T.value=!0,r("load")},handleImgError:()=>{O.value=!0,r("error")}}}}),Ce=({triggerType:e,inlineStyle:a={},triggerIconStyle:r={}})=>{let u={};return e==="button"&&(!r||r&&!r.color)&&a&&a.backgroundColor&&(u={color:a.backgroundColor}),U(U({},r),u)},Ie=["src"];function ze(e,a,r,u,C,f){const m=F("IconImageClose"),d=F("IconLoading"),c=F("resize-observer");return z(),$("div",{ref:"itemRef",style:R(e.outerStyle),class:y([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:a[2]||(a[2]=(...t)=>e.onClick&&e.onClick(...t))},[v(c,{onResize:e.handleResize},{default:ie(()=>[w("span",{ref:"wrapperRef",class:y(e.wrapperCls)},[e.imageUrl?(z(),$(ue,{key:0},[e.hasError?S(e.$slots,"error",{key:0},()=>[w("div",{class:y(`${e.prefixCls}-image-icon`)},[v(m)],2)]):b("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?S(e.$slots,"default",{key:1},()=>[w("div",{class:y(`${e.prefixCls}-image-icon`)},[v(d)],2)]):b("v-if",!0),e.hasError||!e.shouldLoad?b("v-if",!0):(z(),$("img",{key:2,src:e.imageUrl,style:R({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:a[0]||(a[0]=(...t)=>e.handleImgLoad&&e.handleImgLoad(...t)),onError:a[1]||(a[1]=(...t)=>e.handleImgError&&e.handleImgError(...t))},null,44,Ie))],64)):S(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(z(),$("div",{key:0,class:y(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:R(e.computedTriggerIconStyle)},[S(e.$slots,"trigger-icon")],6)):b("v-if",!0)],6)}var P=Y(ye,[["render",ze]]);const L=W({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:a}){const{shape:r,size:u,autoFixFontSize:C,zIndexAscend:f}=M(e),m=V("avatar-group"),d=i(0);return ce(_,ve({shape:r,size:u,autoFixFontSize:C,zIndexAscend:f,total:d})),()=>{var c,t;const n=D((t=(c=a.default)==null?void 0:c.call(a))!=null?t:[]),l=e.maxCount>0?n.slice(0,e.maxCount):n,s=e.maxCount>0?n.slice(e.maxCount):[];return d.value!==l.length&&(d.value=l.length),v("div",{class:m},[l,s.length>0&&v(ge,e.maxPopoverTriggerProps,{default:()=>[v(P,{class:`${m}-max-count-avatar`,style:e.maxStyle},{default:()=>[me("+"),s.length]})],content:()=>v("div",null,[s])})])}}}),Le=Object.assign(P,{Group:L,install:(e,a)=>{Z(e,a);const r=ee(a);e.component(r+P.name,P),e.component(r+L.name,L)}});export{Le as A};
